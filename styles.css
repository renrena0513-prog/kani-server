/* ========================================
   縺九↓繧ｵ繝ｼ繝舌�繧､繝吶Φ繝� - Styles
   Bootstrap 5 + Bootswatch (Lux) 蟇ｾ蠢懃沿
   ======================================== */

/* ========================================
   CSS螟画焚
   ======================================== */
:root {
    --primary-red: #e85a5a;
    --deep-red: #c94444;
    --cream: #faf5e8;
    --gold: #d4a853;
    --bright-gold: #ffd700;
    --shadow: rgba(92, 61, 46, 0.3);
    --font-title: 'Noto Serif JP', serif;
    --font-body: 'M PLUS Rounded 1c', sans-serif;
}

/* ========================================
   繝吶�繧ｹ繧ｹ繧ｿ繧､繝ｫ
   ======================================== */
body {
    font-family: var(--font-body);
    background:
        radial-gradient(ellipse at 20% 0%, rgba(255, 200, 200, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 100%, rgba(255, 180, 180, 0.3) 0%, transparent 50%),
        linear-gradient(180deg, #e85a5a 0%, #e06060 30%, #d45050 60%, #c94444 100%);
    min-height: 100vh;
    background-attachment: fixed;
    overflow-x: hidden;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
        radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.08) 2px, transparent 2px),
        radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.08) 2px, transparent 2px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
    animation: bgShimmer 20s ease-in-out infinite;
}

@keyframes bgShimmer {

    0%,
    100% {
        opacity: 0.8;
    }

    50% {
        opacity: 1;
    }
}

.container {
    position: relative;
    z-index: 1;
}


/* ========================================
   繧ｿ繧､繝医Ν逕ｻ蜒
   ======================================== */
.title-image-wrapper {
    display: inline-block;
}

.title-image {
    max-width: 100%;
    height: auto;
    max-height: 200px;
    filter: drop-shadow(0 4px 15px rgba(0, 0, 0, 0.3));
    animation: titleFloat 4s ease-in-out infinite;
    margin-top: 60px;
    /* 隱崎ｨｼUI縺ｨ驥阪↑繧峨↑縺�ｈ縺�↓ */
}

@media (max-width: 576px) {
    .title-image {
        margin-top: 70px;
    }
}

@keyframes titleFloat {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5px);
    }
}

@media (min-width: 768px) {
    .title-image {
        max-height: 280px;
    }
}

@media (min-width: 992px) {
    .title-image {
        max-height: 350px;
    }
}

/* ========================================
   繧､繝吶Φ繝医き繝ｼ繝会ｼ亥崋螳壹し繧､繧ｺ譫���
   ======================================== */
.event-card-frame {
    display: block;
    text-decoration: none;
    border: 4px solid var(--gold);
    border-radius: 16px;
    overflow: hidden;
    padding: 10px;
    background: linear-gradient(135deg, var(--cream) 0%, #f5efe0 100%);
    box-shadow: 0 8px 25px var(--shadow), 0 4px 10px rgba(0, 0, 0, 0.15);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    /* 鬮倥＆繧定�蜍輔↓縺励※逕ｻ蜒上�繧｢繧ｹ繝壹け繝域ｯ斐ｒ菫晄戟 */
}

.event-card-frame img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 10px;
    /* contain 縺ｫ螟画峩縺励※隕句�繧後ｒ髦ｲ豁｢ */
    object-fit: contain;
    object-position: center;
    transition: transform 0.4s ease, filter 0.3s ease;
}

.event-card-frame:hover {
    transform: translateY(-8px) scale(1.02);
    border-color: var(--bright-gold);
    box-shadow: 0 20px 50px var(--shadow), 0 10px 25px rgba(0, 0, 0, 0.2), 0 0 30px rgba(212, 168, 83, 0.3);
}

.event-card-frame:hover img {
    transform: scale(1.05);
    filter: brightness(1.05) saturate(1.1);
}

/* ========================================
   邂｡逅�判髱｢繝懊ち繝ｳ
   ======================================== */
.admin-button {
    font-family: var(--font-body);
    font-size: 1.2rem;
    font-weight: 500;
    letter-spacing: 3px;
    padding: 16px 30px;
    border-radius: 16px;
    border: 2px solid rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(8px);
    transition: all 0.3s ease;
}

.admin-button:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: #fff;
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

@media (min-width: 992px) {
    .admin-button {
        font-size: 1.3rem;
        padding: 18px 40px;
    }
}

/* ========================================
   繝輔ャ繧ｿ繝ｼ
   ======================================== */
.wave-pattern {
    height: 40px;
    background:
        radial-gradient(circle at 50% 0%, transparent 25px, rgba(255, 255, 255, 0.1) 26px, rgba(255, 255, 255, 0.1) 27px, transparent 28px) 0 0,
        radial-gradient(circle at 50% 0%, transparent 25px, rgba(255, 255, 255, 0.1) 26px, rgba(255, 255, 255, 0.1) 27px, transparent 28px) 25px 0;
    background-size: 50px 25px;
}

/* ========================================
   隱崎ｨｼUI
   ======================================== */
.auth-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* 繝｢繝舌う繝ｫ逕ｨ隱崎ｨｼUI */
@media (max-width: 576px) {
    .auth-container {
        top: 10px;
        right: 10px;
        gap: 5px;
        flex-wrap: wrap;
        justify-content: flex-end;
        max-width: 200px;
    }

    .auth-button {
        padding: 6px 10px;
        font-size: 0.75rem;
    }

    #user-info {
        padding: 5px 10px;
        font-size: 0.75rem;
    }

    #user-info img {
        width: 28px !important;
        height: 28px !important;
    }
}

.auth-button {
    font-family: var(--font-body);
    font-size: 0.9rem;
    padding: 10px 20px;
    border-radius: 10px;
    border: 2px solid var(--gold);
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    cursor: pointer;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    font-weight: 500;
}

.auth-button:hover {
    background: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    border-color: var(--bright-gold);
}

.auth-button.logout {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(8px);
}

.auth-button.logout:hover {
    background: rgba(255, 255, 255, 0.3);
}

#user-info {
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid var(--gold);
    backdrop-filter: blur(8px);
    padding: 8px 15px;
    border-radius: 25px;
    color: #333;
    font-size: 0.9rem;
    font-weight: 500;
}

#user-info img {
    border: 3px solid var(--gold);
    box-shadow: 0 0 15px rgba(212, 168, 83, 0.6);
    transition: all 0.3s ease;
}

#user-info:hover img {
    border-color: var(--bright-gold);
    box-shadow: 0 0 25px rgba(255, 215, 0, 0.8);
    transform: scale(1.1);
}

#user-info a {
    transition: all 0.3s ease;
}

#user-info:hover {
    background: rgba(255, 255, 255, 0.25);
}

/* ========================================
   なりすましバナー用スタイル
   ======================================== */
.impersonation-banner {
    position: sticky;
    top: 0;
    z-index: 2000;
    transition: all 0.3s ease;
}

/* なりすまし中、固定要素（認証UI等）を下へずらす */
body.user-impersonating .auth-container {
    top: 60px !important;
    /* バナーの高さ分+α */
}

/* タイトル画像のトップマージンも調整（バナー分押し下げる） */
body.user-impersonating .title-image {
    margin-top: 20px;
}

@media (max-width: 576px) {
    body.user-impersonating .auth-container {
        top: 55px !important;
    }
}

/* 5列グリッド用のカスタムクラス */
@media (min-width: 768px) {
    .col-md-5th {
        flex: 0 0 auto;
        width: 20% !important;
    }
}

/* Base Badge Card Style */
.badge-card {
    transition: all 0.3s ease;
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
}


/* ========================================
   Mutant Badge Effects (Shared)
   ======================================== */
.mutant-badge-container {
    position: relative;
    display: inline-block;
    transition: all 0.3s ease;
}

/* Rising Bubble Aura */
.mutant-badge-container.active::before,
.mutant-badge-container.active::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 50%;
    width: 80px;
    height: 120px;
    transform: translateX(-50%);
    z-index: 0;
    pointer-events: none;
    border-radius: 50% 50% 0 0;
    filter: blur(15px);
}

.mutant-badge-container.active::before {
    background: radial-gradient(circle at center, rgba(180, 0, 255, 0.4) 0%, transparent 70%);
    animation: bubblesRiseSmall 3s infinite ease-in;
}

.mutant-badge-container.active::after {
    background: radial-gradient(circle at center, rgba(0, 200, 255, 0.3) 0%, transparent 70%);
    animation: bubblesRiseSmall 4s infinite ease-out;
    animation-delay: 1.5s;
}

/* Floating Animation for the Badge itself */
.mutant-badge-container.active img {
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 0 10px rgba(200, 0, 255, 0.6));
    animation: badgeFloatSmall 4s ease-in-out infinite !important;
}

/* Shine Overlay */
.mutant-badge-shine {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 2;
    overflow: hidden;
    border-radius: inherit;
    -webkit-mask-image: radial-gradient(circle, black 65%, transparent 70%);
    mask-image: radial-gradient(circle, black 65%, transparent 70%);
}

.mutant-badge-shine::before {
    content: '';
    position: absolute;
    top: -100%;
    left: -100%;
    width: 300%;
    height: 300%;
    background: linear-gradient(135deg,
            transparent 40%,
            rgba(255, 255, 255, 0.1) 44%,
            rgba(255, 255, 255, 0.9) 45%,
            rgba(255, 255, 255, 0.2) 46%,
            transparent 48%,
            transparent 50%,
            rgba(255, 255, 255, 0.1) 51%,
            rgba(255, 255, 255, 0.6) 52%,
            rgba(255, 255, 255, 0.1) 53%,
            transparent 55%);
    filter: blur(3px);
    animation: mutantShineDiagonalSmall 2s infinite ease-in-out;
}

@keyframes bubblesRiseSmall {
    0% {
        transform: translateX(-50%) translateY(0) scale(0.8);
        opacity: 0;
    }

    20% {
        opacity: 0.6;
    }

    80% {
        opacity: 0.4;
    }

    100% {
        transform: translateX(-50%) translateY(-100px) scale(1.2);
        opacity: 0;
    }
}

@keyframes mutantShineDiagonalSmall {
    0% {
        transform: translate(-30%, -30%);
    }

    100% {
        transform: translate(10%, 10%);
    }
}

@keyframes badgeFloatSmall {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5px);
    }
}

/* Mini version for Ranking Tables (24px badges) */
.mutant-badge-container.mini.active::before,
.mutant-badge-container.mini.active::after {
    width: 40px;
    height: 60px;
    bottom: -8px;
    filter: blur(8px);
}

.mutant-badge-container.mini.active img {
    filter: drop-shadow(0 0 5px rgba(200, 0, 255, 0.8));
    animation: badgeFloatMini 4s ease-in-out infinite !important;
}

@keyframes badgeFloatMini {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-2px);
    }
}

/* Large version for Badge Detail Page (150px) */
.mutant-badge-container.large {
    width: auto;
    height: auto;
    display: inline-block;
}

.mutant-badge-container.large.active::before,
.mutant-badge-container.large.active::after {
    bottom: -50px;
    width: 250px;
    height: 400px;
    filter: blur(35px);
}

.mutant-badge-container.large.active::before {
    animation: bubblesRise 4s linear infinite;
}

.mutant-badge-container.large.active::after {
    animation: bubblesRise 6s linear infinite reverse;
    opacity: 0.7;
}

.mutant-badge-container.large.active img {
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 0 15px rgba(200, 0, 200, 0.8)) drop-shadow(0 0 30px rgba(150, 0, 255, 0.4));
    animation: badgeFloatSimple 4s ease-in-out infinite !important;
}

@keyframes bubblesRise {
    0% {
        background-position: 0% 100%;
        transform: translateX(-50%) translateY(20px) scale(0.8);
        opacity: 0;
    }

    10% {
        opacity: 0.8;
    }

    90% {
        opacity: 0.8;
    }

    100% {
        background-position: 0% -100%;
        transform: translateX(-50%) translateY(-100px) scale(1.2);
        opacity: 0;
    }
}

@keyframes badgeFloatSimple {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-8px);
    }
}

/* ========================================
   新レアリティシステム対応 (2025-01-26)
   ======================================== */

/* バッジショップ風のメタUI */
.rarity-pill {
    font-size: 0.7rem;
    padding: 2px 12px;
    border-radius: 20px;
    color: #fff;
    font-weight: bold;
    text-transform: uppercase;
}

.badge-type-pill {
    border-radius: 10px;
    padding: 0.2rem 0.5rem;
    font-size: 0.65rem;
    display: inline-flex;
    align-items: center;
    line-height: 1;
}

.creator-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 2px 10px;
    border: 1px solid #dee2e6;
    border-radius: 999px;
    background: #fff;
    font-size: 0.75rem;
    color: #495057;
    line-height: 1;
}

.sell-detail-large {
    font-size: 1.1rem;
    line-height: 1.6;
}

.sell-meta-row {
    align-items: center;
}

.sell-meta-row .badge,
.sell-meta-row .creator-pill,
.sell-meta-row .rarity-pill {
    line-height: 1;
    height: 22px;
    display: inline-flex;
    align-items: center;
    margin-bottom: 0 !important;
}

.sell-meta-row .badge-type-pill {
    font-size: 0.7rem;
    height: 22px;
}

.sell-line {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
}

.profit-negative {
    color: #dc3545 !important;
}

/* 並品：ライトグレー（#BFC3C9）＋ホワイト */
.rarity-normal {
    background: #BFC3C9 !important;
    color: #fff !important;
    border-color: #fff !important;
}

/* 名品：グリーン（#2FBF71）＋ライトグリーン */
.rarity-fine {
    background: #2FBF71 !important;
    color: #e8f5e9 !important;
    border-color: #a5d6a7 !important;
}

/* 逸品：ブルー（#2D7FF9）＋シアン */
.rarity-rare {
    background: #2D7FF9 !important;
    color: #e0f7fa !important;
    border-color: #4dd0e1 !important;
}

/* 絶品：パープル（#8A5CFF）＋ラベンダー */
.rarity-epic {
    background: #8A5CFF !important;
    color: #f3e5f5 !important;
    border-color: #e1bee7 !important;
}

/* 至高：ゴールド（金）（#D4AF37）＋濃い金/黒 */
.rarity-legendary {
    background: #D4AF37 !important;
    color: #000 !important;
    border-color: #fbc02d !important;
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
}

/* 国宝：プラチナ/白金（#E5E4E2）＋ゴールド細線 */
.rarity-national {
    background: #E5E4E2 !important;
    color: #333 !important;
    border: 2px solid #D4AF37 !important;
    box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
}

/* 秘宝：エメラルド（深緑）（#0B8F6A）＋ゴールド */
.rarity-treasure {
    background: #0B8F6A !important;
    color: #ffd700 !important;
    border-color: #ffd700 !important;
}

/* 神秘：ディープネイビー（#0B1F3B）＋アクア（#2EE6D6） */
.rarity-mystic {
    background: #0B1F3B !important;
    color: #2EE6D6 !important;
    border-color: #2EE6D6 !important;
    box-shadow: 0 0 10px rgba(46, 230, 214, 0.4);
}

/* 英雄：クリムゾン（#D7263D）＋ゴールド */
.rarity-hero {
    background: #D7263D !important;
    color: #ffd700 !important;
    border-color: #ffd700 !important;
    box-shadow: 0 4px 15px rgba(215, 38, 61, 0.4);
}

/* 伝説：オレンジ〜アンバー（#FF8C00）＋ゴールド */
.rarity-legend {
    background: linear-gradient(135deg, #FF8C00, #FFA500) !important;
    color: #fff !important;
    border-color: #ffd700 !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    border: 2px solid #ffd700 !important;
}

/* 幻想：虹色グラデ（#7C3AED→#06B6D4→#22C55E） */
.rarity-fantasy {
    background: linear-gradient(135deg, #7C3AED, #06B6D4, #22C55E) !important;
    color: #fff !important;
    border: 2px solid rgba(255, 255, 255, 0.5) !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* 神話：ロイヤルパープル（#4B2E83）＋星光ゴールド（#F6D365） */
.rarity-mythic {
    background: #4B2E83 !important;
    color: #F6D365 !important;
    border: 2px solid #F6D365 !important;
    box-shadow: 0 0 15px rgba(246, 211, 101, 0.5);
    animation: mythicPulse 3s infinite alternate;
    background-size: 200% 200% !important;
}

@keyframes mythicPulse {
    0% {
        box-shadow: 0 0 15px rgba(246, 211, 101, 0.5);
    }

    100% {
        box-shadow: 0 0 25px rgba(246, 211, 101, 0.8);
    }
}

/* 超越：ブラック（#0B0B0F）＋レインボー縁/白発光 */
.rarity-transcend {
    position: relative;
    background: #0B0B0F !important;
    color: #fff !important;
    /* レインボーボーダーを実現するための擬似要素スタイルは別途必要だが、簡易的にborder-image等で */
    border: 3px solid transparent !important;
    background-image: linear-gradient(#0B0B0F, #0B0B0F),
        linear-gradient(to right, #ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0000ff, #8000ff, #ff0080) !important;
    background-origin: border-box !important;
    background-clip: padding-box, border-box !important;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}

/* 測定不能（EX）：ノイズ/宇宙（#000000ベース）＋ホログラム */
.rarity-ex {
    background: #000 !important;
    color: #00F5FF !important;
    border: 2px solid #00F5FF !important;
    box-shadow: 0 0 20px rgba(0, 245, 255, 0.6);
    animation: exPulse 2s infinite;
    font-weight: 800;
    letter-spacing: 1px;
}

@keyframes exPulse {
    0% {
        box-shadow: 0 0 15px rgba(0, 245, 255, 0.6);
        color: #00F5FF;
        border-color: #00F5FF;
    }

    50% {
        box-shadow: 0 0 30px rgba(255, 0, 230, 0.6);
        color: #FFE600;
        border-color: #FFE600;
    }

    100% {
        box-shadow: 0 0 15px rgba(0, 245, 255, 0.6);
        color: #00F5FF;
        border-color: #00F5FF;
    }
}
