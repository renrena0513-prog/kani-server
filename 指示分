# 追加修正依頼（event/slot.html）※要件＋原因候補（例）だけ提示、実装はCodexに任せる

対象: event/slot.html

---

## 1) 通常モード：FS確定後にバーストを引くと停止図柄が全て空になる（図柄を消さない）

### 現象
通常モードで「フリースピンへ確定（slot_confirm_jackpot）」した後にバーストを引くと、
停止済みの図柄表示が全て空になってしまう（以前は表示できていた）。

### 原因候補（例）
- RPC返却の `reels[].reel_index` が文字列になっており、UI側で number として扱っているため
  Map参照や比較が失敗して「全リール reelなし扱い」になっている（結果、stop表示が空になる）
- bust確定後に残りリールを強制表示する処理が、FS確定後の分岐で走らず
  既存の停止表示まで巻き込んでクリアしている
- `confirmJackpot(resetReels)` まわりで reels の扱い（上書き/クリア）が意図せず発生している

### 要件
- バースト時でも表示を壊さないこと
- 図柄を消さないこと（以前の挙動に戻す）

受け入れ条件：
- FS確定後にバーストを引いても、停止済みの図柄表示が空にならない

---

## 2) FS再開：途中停止データがあるのに「フリースピン開始」押下で回転アニメに上書きされる（停止図柄は維持）

### 現象
FS中にリロードして復帰した際、DBに途中まで停止したリール（例：1〜6停止）のデータがある場合は
その停止図柄が表示できるようになったが、
「フリースピン開始」ボタンを押すと回転アニメで上書きされ、停止済みまで回ってしまう。

### 原因候補（例）
- FS開始ボタン押下時に、無条件で「表示リセット（resetReelDisplay / reelsクリア等）」が走ってしまい、
  DB由来の停止データを捨てている
- “新ラウンド開始” と “途中再開” の区別が無く、常に新規開始の初期化をしている
- DOMの回転クラス付与（fs-loop 等）と、reelState/停止判定が同期しておらず
  停止済みリールにも回転演出が被る

### 要件
- DBに途中停止データがある「再開」ケースでは、フリースピン開始を押しても停止済み図柄は維持すること
- 未停止のリールだけ回転させること（停止済みは回さない）
- つまり「再開」では表示をリセットしないこと（新ラウンド開始時のみリセット）

受け入れ条件：
- FS再開で途中停止データ（例：1〜6停止）があるとき、フリースピン開始押下後も1〜6の停止図柄が保持され、未停止のみ回る